<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>4.5. Content Cache Keys</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    The Springcache plugin uses an instance of the interface <code>grails.plugin.springcache.key.KeyGenerator</code> to generate the cache key. The default implementation is a bean named  <em class="italic">springcacheDefaultKeyGenerator</em>  which is of type <code>grails.plugin.springcache.web.key.DefaultKeyGenerator</code>. If you want to use a different key generator for a particular action you just need to add the <code>keyGenerator</code> element to the <code>&#64;Cacheable</code> annotation specifying the name of a Spring bean that implements the <code>KeyGenerator</code> interface.<p class="paragraph"/><div class="code"><pre>@Cacheable(cache = <span class="java&#45;quote">"albumControllerCache"</span>, keyGenerator = <span class="java&#45;quote">"myKeyGenerator"</span>)
def list = &#123;
    // &#8230;
&#125;</pre></div><p class="paragraph"/>Alternatively you can override the default key generator by redefining the  <em class="italic">springcacheDefaultKeyGenerator</em>  bean in  <em class="italic">resources.groovy</em> .<p class="paragraph"/><blockquote class="note">
The <code>keyGenerator</code> element is only for content caching and just works on controllers, it is ignored by the <code>&#64;Cacheable</code> annotation on service methods and taglibs.
</blockquote><p class="paragraph"/><h3><code>grails.plugin.springcache.web.key.DefaultKeyGenerator</code></h3><p class="paragraph"/>The <code>DefaultKeyGenerator</code> generates a key based on the controller name, action name and any request parameters (which can be from a query string,  <em class="italic">POST</em>  body or those added by Grails URL mappings, e.g. the  <em class="italic">id</em>  parameter on a standard  <em class="italic">show</em>  or  <em class="italic">edit</em>  action).<p class="paragraph"/><h3><code>grails.plugin.springcache.web.key.WebContentKeyGenerator</code></h3><p class="paragraph"/><code>WebContentKeyGenerator</code> is a multi-purpose <code>KeyGenerator</code> implementation that exposes a number of boolean properties that control key generation. All the properties default to  <em class="italic">false</em> .<p class="paragraph"/><h5>ajax</h5><p class="paragraph"/>If  <em class="italic">true</em>  then keys will differ depending on the presence or absence of the <code>X-Requested-With</code> request header so  <em class="italic">AJAX</em>  requests will be cached separately from regular requests. This is useful when you have an action that renders different content when it is requested via  <em class="italic">AJAX</em> .<p class="paragraph"/><h5>contentType</h5><p class="paragraph"/>If  <em class="italic">true</em>  keys will differ depending on the requested content format as determined by the <code>format</code> meta-property on <code>HttpServletRequest</code>. This is useful when you use content negotiation in a request so that responses with different formats are cached separately.<p class="paragraph"/>See <a href="../guide/single.html#4.6. Content Negotiation" class="guide">Content Negotiation</a> for more detail.<p class="paragraph"/><h5>requestMethod</h5><p class="paragraph"/>If  <em class="italic">true</em>  keys will differ depending on the request HTTP method. This is useful for some  <em class="italic">RESTful</em>  controllers (although if different request methods are mapped to different actions you do not need to use this mechanism).  <em class="italic">GET</em>  and  <em class="italic">HEAD</em>  requests are considered the same for the purposes of key generation.<p class="paragraph"/><h4>Example configuration</h4><p class="paragraph"/><div class="code"><pre>ajaxAwareKeyGenerator(WebContentKeyGenerator) &#123;
	ajax = <span class="java&#45;keyword">true</span>
&#125;<p class="paragraph"/>contentTypeAwareKeyGenerator(WebContentKeyGenerator) &#123;
	contentType = <span class="java&#45;keyword">true</span>
&#125;</pre></div><p class="paragraph"/>
    </body>
</html>
