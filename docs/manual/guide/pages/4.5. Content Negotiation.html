<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>4.5. Content Negotiation</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    By default the key generator used by the page fragment caching filter does not take content negotiation into account. However, if you are caching controller actions that use Grails' <a href="http://grails.org/doc/latest/ref/Controllers/withFormat.html" target="blank"><code>withFormat</code></a> dynamic method to render different content types you will want to cache results separately according to the output format. The plugin provides a key generator implementation that supports this, you just need to override the filter's key generator in <code>Config.groovy</code> like this:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.plugin.springcache.web.key.MimeTypeAwareKeyGenerator<p class="paragraph"/>beans &#123;
    springcacheFilter &#123;
		keyGenerator = <span class="java&#45;keyword">new</span> MimeTypeAwareKeyGenerator()
	&#125;
&#125;</pre></div>

    </body>
</html>
