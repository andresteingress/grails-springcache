<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>6. Cache Configuration</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    Caches referenced by the annotations can be configured, either in an <code>ehcache.xml</code> (usually kept in the <code>grails-app/conf</code> directory) file, using <code>EhCacheFactoryBean</code> definitions in <code>grails-app/conf/spring/resources.groovy</code> or via <code>Config.groovy</code>. If you do not configure caches individually they will be created on demand using defaults.<p class="paragraph"/><h3>Configuring caches with resources.groovy</h3><p class="paragraph"/>You can configure caches in <code>grails-app/conf/spring/resources.groovy</code> using instances of Spring's <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/cache/ehcache/EhCacheFactoryBean.html" target="blank">EhCacheFactoryBean</a> class. For example:<p class="paragraph"/><h4>grails-app/conf/spring/resources.groovy</h4><p class="paragraph"/><div class="code"><pre>pirateCache(EhCacheFactoryBean) &#123; bean &#45;&#62;
    cacheManager = ref(<span class="java&#45;quote">"springcacheCacheManager"</span>)
    cacheName = <span class="java&#45;quote">"pirateCache"</span>
    // these are just examples of properties you could set
    eternal = <span class="java&#45;keyword">false</span>
    diskPersistent = <span class="java&#45;keyword">false</span>
    memoryStoreEvictionPolicy = <span class="java&#45;quote">"LRU"</span>
&#125;</pre></div><p class="paragraph"/>You can inherit default cache properties from those defined in <code>Config.groovy</code> by setting the factory bean's parent to '<code>springcacheDefaultCache</code>'. For example:<p class="paragraph"/><div class="code"><pre>pirateCache(EhCacheFactoryBean) &#123; bean &#45;&#62;
    bean.parent = ref(<span class="java&#45;quote">"springcacheDefaultCache"</span>)
    cacheName = <span class="java&#45;quote">"pirateCache"</span>
    // set any properties unique to <span class="java&#45;keyword">this</span> cache
    memoryStoreEvictionPolicy = <span class="java&#45;quote">"LRU"</span>
&#125;</pre></div><p class="paragraph"/><h3>Configuring caches with Config.groovy</h3><p class="paragraph"/>The Springcache plugin enables you to define caches in <code>Config.groovy</code> for convenience. For example:<p class="paragraph"/><h4>grails-app/conf/Config.groovy</h4><p class="paragraph"/><div class="code"><pre>springcache &#123;
    defaults &#123;
        // set <span class="java&#45;keyword">default</span> cache properties that will apply to all caches that <span class="java&#45;keyword">do</span> not override them
        eternal = <span class="java&#45;keyword">false</span>
        diskPersistent = <span class="java&#45;keyword">false</span>
    &#125;
    caches &#123;
        pirateCache &#123;
            // set any properties unique to <span class="java&#45;keyword">this</span> cache
            memoryStoreEvictionPolicy = <span class="java&#45;quote">"LRU"</span>
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/>Under the hood this is simply setting up <code>EhCacheFactoryBean</code> instances in the Spring context, so it is up to you whether you prefer to use <code>resources.groovy</code> or <code>Config.groovy</code> there is not much difference.<p class="paragraph"/>The properties shown are just examples, see the <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/cache/ehcache/EhCacheFactoryBean.html" target="blank">EhCacheFactoryBean</a> documentation for full details of all the properties you can set.

    </body>
</html>
